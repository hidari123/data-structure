<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        class Set {
            constructor () {
                this.item = {}
            }
            add(value) {
                // 判断集合中是否包含该元素
                if(this.has(value)) return false
                this.item[value] = value
                return true
            }
            remove(value) {
                if(!this.has(value)) return false
                delete this.item[value]
                return true
            }
            clear() {
                this.item = []
            }
            size() {
                return Object.keys(this.item).length
            }
            values() {
                return Object.keys(this.item)
            }
            has(value) {
                return this.item.hasOwnProperty(value)
            }

            // 集合间操作
            // 并集
            union(otherSet) {
                let unionSet = new Set()
                let values = this.values()
                for (let i = 0; i < values.length; i++) {
                    unionSet.add(values[i])
                }
                values = otherSet.values()
                for (let i = 0; i < values.length; i++) {
                    if(!unionSet.has(values[i])) unionSet.add(values[i])
                }
                return unionSet
            }

            intersection(otherSet) {
                let intersectionSet = new Set()
                let values = this.values()
                for (let i = 0; i < values.length; i++) {
                    let item = values[i]
                    if (otherSet.has(item)) intersectionSet.add(item)
                }
                return intersectionSet
            }

            // 差集
            difference(otherSet) {
                let differenceSet = new Set()
                let values = this.values()
                for (let i = 0; i < values.length; i++) {
                    let item = values[i]
                    if (!otherSet.has(item)) differenceSet.add(item)
                }
                return differenceSet
            }

            // 子集
            subset(otherSet) {
                let values = this.values()
                for (let i = 0; i < values.length; i++) {
                    let item = values[i]
                    if (!otherSet.has(item)) return false
                }
                return true
            }
        }
        let set = new Set()
        set.add('abc')
        set.add('def')
        set.add('abc')

        let otherSet = new Set()
        otherSet.add('def')
        otherSet.add('123')
        set.union(otherSet)
        console.log(set.values())
        console.log(otherSet.values())
        console.log(set.union(otherSet).values())
        console.log(set.intersection(otherSet).values())
        console.log(set.difference(otherSet).values())
        let sub = new Set()
        sub.add('abc')
        console.log(sub.subset(set))
    </script>
</body>
</html>
